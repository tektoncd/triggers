apiVersion: tekton.dev/v1alpha1
kind: Task
metadata:
  name: say-hello
spec:
  inputs:
    resources:
      - name: git-source
        type: git
  steps:
  - name: say-hi
    image: bash
    command: ["bash", "-c"]
    args:
      - echo 'Hello Triggers!'
---
apiVersion: tekton.dev/v1alpha1
kind: Task
metadata:
  name: say-message
spec:
  inputs:
    params:
    - name: message
      description: The message to print
      default: This is the default message
      type: string
    resources:
    - name: git-source
      type: git
  steps:
  - name: say-message
    image: bash
    command: ["bash", "-c"]
    args:
      - echo '$(inputs.params.message)'
---
apiVersion: tekton.dev/v1alpha1
kind: Task
metadata:
  name: say-bye
spec:
  inputs:
    resources:
    - name: git-source
      type: git
  steps:
  - name: say-bye
    image: bash
    command: ["bash", "-c"]
    args:
    - echo 'Goodbye Triggers!'
---
apiVersion: tekton.dev/v1alpha1
kind: Pipeline
metadata:
  name: simple-pipeline
spec:
  params:
  - name: message
    description: The message to print
    default: This is the default message
    type: string
  resources:
  - name: git-source
    type: git
  tasks:
  - name: say-hello
    taskRef:
      name: say-hello
    resources:
      inputs:
      - name: git-source
        resource: git-source
  - name: say-message
    runAfter: [say-hello]
    taskRef:
      name: say-message
    params:
    - name: message
      value: $(params.message)
    resources:
      inputs:
      - name: git-source
        resource: git-source
  - name: say-bye
    runAfter: [say-message]
    taskRef:
      name: say-bye
    resources:
      inputs:
      - name: git-source
        resource: git-source